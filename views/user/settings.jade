extends ../layouts/user

block body
	.col-xs-12
		+alert(settingsAlerts)
		include ../includes/profile-mixins

		.well.settings-edit(ng-controller="SettingsCtrl")
			+form("/user/settings")
				fieldset
					h3
						=userTexts.identityTitle
					h6
						=userTexts.identityHint
				
					//- Identity
					label
						span
							=userTexts.firstName
						+formControl(name="name.first" value=user.firstName required)
					label
						span
							=userTexts.lastName
						+formControl(name="name.last" value=user.lastName required)
					label
						span
							=userTexts.sex
						select.form-control(autocomplete="off" value=user.sex required name="sex")
							option(value="" selected=(user.sex=="default"))
								=userTexts.chooseSex
							option(value="man" selected=(user.sex=="man"))
								=userTexts.man
							option(value="woman" selected=(user.sex=="woman"))
								=userTexts.woman	
					label
						span
							=userTexts.birthDate
						+formControl(type="date" name="birthDate" value=user.birthDate.toString('YYYY-MM-DD'))
					hr.cb
					label
						span
							=userTexts.email
						+formControl(autocomplete="off" name="email" value=user.email pattern=pattern('email'))
					label
						span
							=s("Changement de mot de passe")
							br
							small: i
								=s("Si vide, pas de changement de mot de passe.")
						+formControl("password")(autocomplete="off" name="password" placeholder=s("Entrez votre nouveau mot de passe"))
				fieldset
					h3
						=userTexts.confidentialityTitle
					h6
						=userTexts.confidentialityHint
					//- Privacy
					label
						span
							=userTexts.privacy
						select#account-confidentiality.form-control(autocomplete="off" name="accountConfidentiality")
							option(value="private" selected=(user.accountConfidentiality=="private"))
								=userTexts.private
							option(value="public" selected=(user.accountConfidentiality=="public"))
								=userTexts.public
						label.right.account-confidentiality-hint-private(class=(user.accountConfidentiality=="private") ? "" : "hidden")
							=userTexts.accountConfidentialityHintPrivate
						label.right.account-confidentiality-hint-public(class=(user.accountConfidentiality=="public") ? "" : "hidden")
							=userTexts.accountConfidentialityHintPublic
					label#allowFriendPostOnMe(class=(user.accountConfidentiality=="public") ? "" : "hidden")
						span
							=userTexts.allowFriendPostOnMe
						=s("Oui")
						input(type="radio" name="allowFriendPostOnMe" id="allowFriendPostOnMeOui" value="on" checked=user.allowFriendPostOnMe)
						=s("Non")
						input(type="radio" name="allowFriendPostOnMe" id="allowFriendPostOnMeNon" value="off" checked=!user.allowFriendPostOnMe)
					label.right#urlIdDisponibility(class=(user.accountConfidentiality=="public") ? "" : "hidden")
					label#urlIdContainer(class=(user.accountConfidentiality=="public") ? "" : "hidden")
						span
							=userTexts.customURL
						+formControl#uniqueURLID(name="uniqueURLID" value=user.uniqueURLID required ng-keyUp="generateURLVisu()")
						input.btn.checkURLID(type="button" value=userTexts.btnCheckURLID ng-click="checkURLID()")
						label.right#urlVisual
					label
						span
							=userTexts.confidentialityBirthDate
						=s("Oui")
						input(type="radio" name="maskBirthDate" id="confidentialityBirthDatePrive" value="on" checked=user.maskBirthDate)
						=s("Non")
						input(type="radio" name="maskBirthDate" id="confidentialityBirthDatePublic" value="off" checked=!user.maskBirthDate)
					br
					label
						span
							=userTexts.confidentialityFriendList
						=s("Oui")
						input(type="radio" name="maskFriendList" id="confidentialityFriendListPrive" value="on" checked=user.maskFriendList)
						=s("Non")
						input(type="radio" name="maskFriendList" id="confidentialityFriendListPublic" value="off" checked=!user.maskFriendList)
					//- Notification
						.opt-group
							input(type="checkbox" name="newsletter" id="newsletter" checked=user.newsletter)
							label(for="newsletter")
								=s("S'abonner à la newsletter Oui ou Non Suivez les évènements et autres manifestations proposées par votre réseau social préféré !")
						.opt-group
							input(type="checkbox" name="noticeFriendAsk" id="noticeFriendAsk" checked=user.noticeFriendAsk)
							label(for="noticeFriendAsk")
								=s("M'avertir lors d'une demande d'ajout.")
						.opt-group
							input(type="checkbox" name="noticePublish" id="noticePublish" checked=user.noticePublish)
							label(for="noticePublish")
								=s("M'avertir lors de la publication d'un statut sur mon profil.")
						.opt-group
							input(type="checkbox" name="noticeMessage" id="noticeMessage" checked=user.noticeMessage)
							label(for="noticeMessage")
								=s("M'avertir lors de la réception d'un message privé.")
				
				.btn-group
					input.btn.btn-primary(type="submit" value=s("Enregistrer"))
				.btn-group
					a.btn.cancel(href="/")
						=s("Retour à l'accueil")
					| &nbsp; 
				div.after-form.cb
					a#delete-account(data-message=s("Êtes-vous sûr de vouloir supprimer définitivement votre compte, et tout son contenu (images, publications, et toutes les informations liées à votre compte) ?") + '<br><br>' + s("Veuillez entrer votre mot de passe :") data-title=s("Êtes-vous sûr de vouloir supprimer votre compte ?"))
						=s("Supprimer définitivement mon compte")
				.cb
