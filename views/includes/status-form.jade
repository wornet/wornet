
ul.nav.nav-tabs(role="tablist")
	li(ng-click="status.containsPicture = false" ng-class="{ active: ! status.containsPicture }")
		a(title=s("Quoi de neuf ?") data-toggle="tooltip" data-placement="top")
			=s("Publier un statut")
	li(ng-click="status.containsPicture = true; media.step = null;" ng-class="{ active: status.containsPicture }")
		a(title=s("Images, vidéos, liens…") data-toggle="tooltip" data-placement="top")
			=s("Publier un média")
fieldset.tab(ng-show="! status.containsPicture")
	+form()(ng-submit="send(status)")
		h3=strtoupper(s("Publier un statut"))
		.input-group
			+formControl()(autofocus tabindex="91" ng-model="status.content")
			span.input-group-btn
				input(type="submit" tabindex="92" value=s("Envoyer")).btn
fieldset.tab(ng-show="status.containsPicture")
	h3=strtoupper(s("Publier un média"))
	div(ng-switch="media.step")
		div(ng-switch-when="create-album")
			+form()(ng-submit="createAlbum(album)")
				+formControl()(required tabindex="101" ng-model="album.name" name="name" id="album-name" placeholder=s("Nom de l'album"))
				textarea.form-control(rows="3" tabindex="102" ng-model="album.description" placeholder=s("Description (facultatif)"))
				.col-xs-12.col-sm-6.col-sm-offset-3
					input(type="submit" tabindex="103" value=s("Créer")).btn.col-xs-12
		div(ng-switch-when="select-album")
			.album(ng-repeat="album in albums" ng-click="selectAlbum(album)")
				h4 {{ album.name }}
				p.description {{ album.description }}
			.col-xs-12.col-sm-6.col-sm-offset-3
				a.btn.bar(ng-click="media.step = 'create-album'" tabindex="104" give-focus="#album-name")
					=s("Créer un album")
		div(ng-switch-when="add")
			.col-xs-6.fit
				h4.glued.big-line {{ currentAlbum.name }}
			.col-xs-6.fit
				a.glued.btn.bar(ng-click="media.step = 'select-album'" tabindex="111")
					=s("Sélectionner un autre album")
			.col-xs-12.fit
				iframe(name="status-upload")
				+form("/user/photo/add")(target="status-upload" ng-submit="uploadImages(this, images)")
					.upload-container
						.upload-label
							=s("Ajouter média(s)")
							br
							small=s("Glissez les images ici ou cliquez pour ouvrir une fenêtre d'import")
						input(type="file" multiple="multiple" tabindex="112" ng-model="images" name="images").upload-button
		div(ng-switch-default)
			.col-xs-6.fit
				a.btn.bar(ng-click="media.step = 'create-album'" tabindex="121" give-focus="#album-name")
					=s("Créer un album")
			.col-xs-6.fit
				a.btn.bar(ng-click="media.step = 'select-album'" tabindex="122" ng-disabled="albums.length == 0")
					=s("Utiliser un album existant")
